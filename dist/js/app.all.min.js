(function(){"use strict";angular.module("templates",[])})();angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("js/modules/main/main.tpl.html",'<div class="off-canvas__container off-canvas__content">\n    <div class="my-scroll-area full-height" ng-nicescroll nice-option="{cursorcolor: \'#e2edff\'}">\n        <div class="container-fluid">\n            <!--\n            <nav class="navbar navbar-default">\n                <div class="container-fluid">\n                    <div class="header-button-wrapper quarter">\n                        <div class="toggle-player-button square" ng-click="main.toggle()">\n                            <p class="navbar-text left" ng-click="offCanvas.toggle()"> <i class="fa fa-terminal"></i></p>\n\n                        </div>\n                    </div>\n                    <div class="navbar-text half">\n                        <a href="# ">#zajic</a>\n                        <a href="# ">#ncb2015</a>\n\n                    </div>\n                    <div class="header-button-wrapper quarter">\n                        <div class="toggle-player-button square" ng-click="main.toggle()">\n                            <p class="navbar-text left" ng-click="offCanvas.toggle()"> <i class="fa fa-question-circle "></i></p>\n\n                        </div>\n                    </div>\n\n                </div>\n            </nav>\n            <nav class="navbar navbar-default" role="navigation">\n                <div class="navbar-header">\n                    <ul class="nav navbar-nav navbar-right">\n                        <li>\n                            <div class="header-button-wrapper quarter">\n                                <div class="toggle-player-button square" ng-click="main.toggle()">\n                                    <p class="navbar-text left" ng-click="offCanvas.toggle()"> <i class="fa fa-terminal "></i></p>\n\n                                </div>\n                        </li>\n\n                    </ul>\n                    </div>\n                    <a class="navbar-brand" href="#">Brand</a>\n                    <ul class="nav navbar-nav navbar-right">\n                        <li>\n                            <div class="header-button-wrapper quarter">\n                                <div class="toggle-player-button square" ng-click="main.toggle()">\n                                    <p class="navbar-text"> <i class="fa fa-question-circle "></i></p>\n\n                                </div>\n                        </li>\n                    </ul>\n                    </div>\n            </nav>\n\n            <div ng-repeat="piece in main.pieces " class="gridelem " ng-click="main.addToPlaylist(piece) ">\n                {{piece.text}}\n                <div class="number ">{{piece.number}}</div>\n            </div>\n            </div>\n        </div>\n\n-->\n            <nav class="nav navbar-nav">\n\n                <ul class="nav navbar-nav">\n                    <li class="pull-left">\n                        <a href="#" ng-click="main.toggle()" ng-style="{\'visibility\': main.selectedPieces ? \'visible\' : \'hidden\'}"> <i class="fa fa-terminal"></i></a>\n\n                    </li>\n                    <li> <a href="# ">#zajic</a></li>\n                    <li>\n                        <a href="# ">#ncb2015</a>\n                    </li>\n                    <li class="pull-right"><a href="#"><i class="fa fa-question-circle "></i></a></li>\n                </ul>\n            </nav>\n            <div class="center">\n\n                <div ng-repeat="piece in main.pieces " class="gridelem " ng-click="main.addToPlaylist(piece) ">\n                    <div class="square-content">\n                        <div><span>\n                                {{piece.text}}\n                       </span></div>\n                    </div>\n                    <div class="number ">{{piece.number}}</div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n');$templateCache.put("js/modules/off-canvas/off-canvas.tpl.html",'<div class="off-canvas__nav">\n    <div class="my-scroll-area full-height" ng-nicescroll nice-option="{cursorcolor: \'#e2edff\'}">\n        <div class="container-fluid">\n\n\n            <nav class="nav navbar-nav">\n\n                <ul class="nav navbar-nav">\n                    <li class="pull-left">\n                        <a href="#" ng-click="mediaPlayer.play(0, false) " ng-show="offCanvas.playlist.length>0"><i class="fa fa-volume-up" ></i></a>\n                    </li>\n                    <li>\n                        <a href="#"><i class="fa fa-power-off" ></i></a>\n                    </li>\n                    <li class="pull-right"><a href="#" ng-click="offCanvas.toggle()"><i class="fa fa-caret-right"></i></a></li>\n                </ul>\n            </nav>\n\n\n            <p class="poem ">\n                {{offCanvas.poem}}\n            </p>\n\n            <audio media-player="mediaPlayer " data-playlist="offCanvas.playlist ">\n                <source src="" type="">\n            </audio>\n        </div>\n    </div>\n\n</div>\n')}]);(function(){angular.module("poemApp",["ui.router","ui.bootstrap","cn.offCanvas","mediaPlayer","config","angular-nicescroll","templates"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function($stateProvider,$urlRouterProvider,$httpProvider){$urlRouterProvider.otherwise("/home")}])})();(function(){angular.module("poemApp").config(function($stateProvider){$stateProvider.state("home",{url:"/home",templateUrl:"js/modules/main/main.tpl.html",controller:"MainController",controllerAs:"main"})})})();(function(){angular.module("poemApp").controller("MainController",mainController);mainController.$inject=["CONFIG","$scope","$rootScope","$templateCache","myOffCanvas","mainService"];function mainController(CONFIG,$scope,$rootScope,$templateCache,myOffCanvas,mainService){var main=this;console.log("hi");main.pieces=mainService.shuffleArray(mainService.createPieces());main.selectedPieces=false;main.toggle=myOffCanvas.toggle;main.addToPlaylist=function(track){mainService.addToPlaylist(track);main.selectedPieces=true;main.pieces=mainService.shuffleArray(main.pieces);$rootScope.$broadcast("pieceAdded")}}})();(function(){"use strict";angular.module("poemApp").factory("mainService",mainService);mainService.$inject=["CONFIG"];function mainService(CONFIG){var factory={createPieces:createPieces,shuffleArray:shuffleArray,playlist:[],getPlaylist:getPlaylist,addToPlaylist:addToPlaylist};return factory;function createPieces(){var pieces=[];for(var i=0;i<CONFIG.tracks.length;i++){var piece={id:CONFIG.tracks[i].id,number:i+1,text:CONFIG.tracks[i].text,filename:CONFIG.tracks[i].file_name+"."+CONFIG.formats[0]};pieces.push(piece)}console.log("pieces:",pieces);return pieces}function shuffleArray(array){var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue}return array}function addToPlaylist(track){factory.playlist.push(track)}function getPlaylist(){return factory.playlist}}})();(function(){"use strict";angular.module("poemApp").controller("MyOffCanvasCtrl",offCanvasCtrl);offCanvasCtrl.$inject=["myOffCanvas","CONFIG","$scope","$filter","mainService"];function offCanvasCtrl(myOffCanvas,CONFIG,$scope,$filter,mainService){var offCanvas=this;offCanvas.playlist=[];offCanvas.wtf=[];offCanvas.poem="";console.log("mainService.getPlaylist():",mainService.getPlaylist());offCanvas.getPlaylist=function(){$scope.mediaPlayer.stop();offCanvas.playlist=[];offCanvas.poem="";angular.forEach(angular.copy(mainService.getPlaylist()),function(track){offCanvas.poem+=" "+track.text;offCanvas.playlist.push($filter("convertToTrack")(angular.copy(track)))})};$scope.$on("pieceAdded",function(evt){offCanvas.getPlaylist()});offCanvas.toggle=myOffCanvas.toggle}})();(function(){angular.module("poemApp").factory("myOffCanvas",myOffCanvas);myOffCanvas.$inject=["cnOffCanvas"];function myOffCanvas(cnOffCanvas){return cnOffCanvas({controller:"MyOffCanvasCtrl",controllerAs:"offCanvas",templateUrl:"js/modules/off-canvas/off-canvas.tpl.html"})}})();(function(){"use strict";angular.module("poemApp").filter("convertToTrack",convertToTrack);convertToTrack.$inject=["CONFIG"];function convertToTrack(CONFIG){return function(track){var newTrack={src:CONFIG.tracks_folder+track.filename,type:"audio/"+CONFIG.formats[0]};return newTrack}}})();