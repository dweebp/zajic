(function(){"use strict";angular.module("templates",[])})();angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("js/modules/main/main.tpl.html",'<div class="off-canvas__container off-canvas__content">\n    <div class="container-fluid max-widthfull-height my-scroll-area" ng-nicescroll nice-option="{cursorcolor: \'#e2edff\'}">\n        <nav class="navbar navbar-default">\n            <div class="container-fluid">\n                <div class="navbar-header">\n                    <div class="header-button-wrapper">\n                        <div class="toggle-player-button square" ng-click="main.toggle()">\n                            <p class="navbar-text left" ng-click="offCanvas.toggle()"> <i class="fa fa-bars"></i></p>\n\n                        </div>\n                    </div>\n\n                    <a class="navbar-brand " href="# ">Pavel Zaj√≠c</a>\n\n                </div>\n            </div>\n        </nav>\n\n        <div ng-repeat="piece in main.pieces " class="gridelem " ng-click="main.addToPlaylist(piece) ">\n            {{piece.text}}\n            <div class="number ">{{piece.number}}</div>\n        </div>\n    </div>\n</div>\n');$templateCache.put("js/modules/off-canvas/off-canvas.tpl.html",'<div class="off-canvas__nav">\n    <div class="my-scroll-area full-height" ng-nicescroll nice-option="{cursorcolor: \'#e2edff\'}">\n        <div class="container-fluid">\n\n            <nav class="navbar navbar-default">\n                <div class="container-fluid">\n                    <div class="navbar-header">\n                        <div class="header-button-wrapper">\n                            <i class="fa fa-5x fa-volume-up" ng-click="mediaPlayer.play(0, false) " ng-show="offCanvas.playlist.length>0"></i>\n\n                        </div>\n\n                    </div>\n                    <p class="navbar-text right" ng-click="offCanvas.toggle()"><i class="fa fa-5x fa-caret-right"></i></p>\n                </div>\n            </nav>\n            <p class="poem ">\n                {{offCanvas.poem}}\n            </p>\n\n            <audio media-player="mediaPlayer " data-playlist="offCanvas.playlist ">\n                <source src="" type="">\n            </audio>\n        </div>\n    </div>\n\n</div>\n')}]);(function(){angular.module("poemApp",["ui.router","ui.bootstrap","cn.offCanvas","mediaPlayer","config","angular-nicescroll","templates"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function($stateProvider,$urlRouterProvider,$httpProvider){$urlRouterProvider.otherwise("/home")}])})();(function(){angular.module("poemApp").config(function($stateProvider){$stateProvider.state("home",{url:"/home",templateUrl:"js/modules/main/main.tpl.html",controller:"MainController",controllerAs:"main"})})})();(function(){angular.module("poemApp").controller("MainController",mainController);mainController.$inject=["CONFIG","$rootScope","$templateCache","myOffCanvas","mainService"];function mainController(CONFIG,$rootScope,$templateCache,myOffCanvas,mainService){var main=this;console.log("hi");main.pieces=mainService.shuffleArray(mainService.createPieces());main.toggle=myOffCanvas.toggle;main.addToPlaylist=function(track){mainService.addToPlaylist(track);main.pieces=mainService.shuffleArray(main.pieces);$rootScope.$broadcast("pieceAdded")}}})();(function(){"use strict";angular.module("poemApp").factory("mainService",mainService);mainService.$inject=["CONFIG"];function mainService(CONFIG){var factory={createPieces:createPieces,shuffleArray:shuffleArray,playlist:[],getPlaylist:getPlaylist,addToPlaylist:addToPlaylist};return factory;function createPieces(){var pieces=[];for(var i=0;i<CONFIG.tracks.length;i++){var piece={id:CONFIG.tracks[i].id,number:i+1,text:CONFIG.tracks[i].text,filename:CONFIG.tracks[i].file_name+"."+CONFIG.formats[0]};pieces.push(piece)}console.log("pieces:",pieces);return pieces}function shuffleArray(array){var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue}return array}function addToPlaylist(track){factory.playlist.push(track)}function getPlaylist(){return factory.playlist}}})();(function(){"use strict";angular.module("poemApp").controller("MyOffCanvasCtrl",offCanvasCtrl);offCanvasCtrl.$inject=["myOffCanvas","CONFIG","$scope","$filter","mainService"];function offCanvasCtrl(myOffCanvas,CONFIG,$scope,$filter,mainService){var offCanvas=this;offCanvas.playlist=[];offCanvas.wtf=[];offCanvas.poem="";console.log("mainService.getPlaylist():",mainService.getPlaylist());offCanvas.getPlaylist=function(){$scope.mediaPlayer.stop();offCanvas.playlist=[];offCanvas.poem="";angular.forEach(angular.copy(mainService.getPlaylist()),function(track){offCanvas.poem+=" "+track.text;offCanvas.playlist.push($filter("convertToTrack")(angular.copy(track)))})};$scope.$on("pieceAdded",function(evt){offCanvas.getPlaylist()});offCanvas.toggle=myOffCanvas.toggle}})();(function(){angular.module("poemApp").factory("myOffCanvas",myOffCanvas);myOffCanvas.$inject=["cnOffCanvas"];function myOffCanvas(cnOffCanvas){return cnOffCanvas({controller:"MyOffCanvasCtrl",controllerAs:"offCanvas",templateUrl:"js/modules/off-canvas/off-canvas.tpl.html"})}})();(function(){"use strict";angular.module("poemApp").filter("convertToTrack",convertToTrack);convertToTrack.$inject=["CONFIG"];function convertToTrack(CONFIG){return function(track){var newTrack={src:CONFIG.tracks_folder+track.filename,type:"audio/"+CONFIG.formats[0]};return newTrack}}})();